<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ARISE SYSTEM</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
margin:0;
font-family:Arial;
background:#000;
color:#7ef9ff;
text-align:center;
}

h1{margin-top:20px}

.card{
margin:20px;
padding:20px;
border-radius:14px;
background:#071018;
border:1px solid #00eaff33;
}

.quest{
margin:14px 0;
padding:14px;
background:#010c14;
border-radius:10px;
border:1px solid #00eaff33;
}

.complete{
background:#001a12!important;
border:1px solid #00ff9c!important;
color:#00ff9c;
}

button{
margin:6px;
padding:8px 16px;
border-radius:8px;
border:none;
cursor:pointer;
background:#00eaff;
font-weight:bold;
}

.timer{
font-size:14px;
color:#fff;
display:block;
margin-top:6px;
}

#levelup{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
display:none;
align-items:center;
justify-content:center;
background:black;
font-size:50px;
font-weight:bold;
color:#00eaff;
z-index:999;
}
</style>
</head>
<body>

<div id="levelup">LEVEL UP</div>

<h1>ARISE SYSTEM</h1>

<div class="card">
LEVEL <span id="level"></span><br>
XP <span id="xp"></span>/100<br>
Rank <span id="rank"></span><br>
Streak <span id="streak"></span>
</div>

<div class="card">
STR <span id="str"></span> |
INT <span id="int"></span> |
FOC <span id="foc"></span>
</div>

<div class="card">
<h2>Daily Quests</h2>
<div id="quests"></div>
</div>

<div class="card">
<h2>Event</h2>
<div id="event"></div>
</div>

<script>

/* ---------- SAVE SYSTEM ---------- */

const today = new Date().toDateString()

let data = JSON.parse(localStorage.getItem("arise")) || {
date:today,
xp:0,
level:1,
str:1,
int:1,
foc:1,
streak:0,
quests:[]
}

/* ---------- RANK SYSTEM ---------- */

function rank(l){
if(l<5)return"E"
if(l<10)return"D"
if(l<20)return"C"
if(l<30)return"B"
if(l<40)return"A"
if(l<50)return"S"
if(l<75)return"SS"
if(l<100)return"SSS"
return"MONARCH"
}

function save(){
localStorage.setItem("arise",JSON.stringify(data))
}

/* ---------- QUEST GENERATOR ---------- */

function generateQuests(){
data.quests = [
{t:"Strength Training",stat:"str",time:20,start:0,started:false,done:false},
{t:"Brain Training",stat:"foc",time:30,start:0,started:false,done:false},
{t:"Learn New Skill",stat:"int",time:60,start:0,started:false,done:false},
{t:"Critical Thinking Tasks",stat:"foc",time:45,start:0,started:false,done:false},
{t:"Strategy Planning",stat:"int",time:40,start:0,started:false,done:false}
]

// hidden quest chance
if(Math.random()<0.3){
data.quests.push({t:"Hidden Quest: Cold Shower + Meditation",stat:"str",time:15,start:0,started:false,done:false})
}

save()
}

/* ---------- DAILY RESET ---------- */

if(data.date!==today){

let missed=data.quests.filter(q=>!q.done).length

if(missed>0){
data.event="PUNISHMENT: "+missed+" missed quests!"
for(let i=0;i<missed;i++){
data.quests.push({
t:"Punishment Training",
stat:"str",
time:20,
start:0,
started:false,
done:false
})
}
data.streak=0
}else{
data.streak++
data.event="Perfect Day"
}

data.date=today
generateQuests()
}

/* first launch fix */
if(!data.quests || data.quests.length===0){
generateQuests()
}

/* ---------- LEVEL UP ---------- */

function levelUp(){
data.level++
data.xp=0

document.getElementById("levelup").style.display="flex"
setTimeout(()=>document.getElementById("levelup").style.display="none",2000)

save()
}

/* ---------- START QUEST ---------- */

function startQuest(i){
let q=data.quests[i]
if(q.started||q.done)return

q.started=true
q.start=Date.now()
save()
render()
}

/* ---------- COMPLETE QUEST ---------- */

function completeQuest(i){
let q=data.quests[i]
if(!q.started)return alert("Start quest first")

let elapsed = Date.now()-q.start
if(elapsed < q.time*60000){
return alert("Not finished yet")
}

q.done=true
data.xp+=25
data[q.stat]++

if(data.xp>=100) levelUp()

save()
render()
}

/* ---------- RENDER QUESTS ---------- */

function renderQuests(){
let html=""

data.quests.forEach((q,i)=>{

let remain=0
let timer=""

if(q.started && !q.done){
remain=Math.max(0,q.time*60000-(Date.now()-q.start))
let m=Math.floor(remain/60000)
let s=Math.floor((remain%60000)/1000)
timer=`<span class="timer">${m}m ${s}s remaining</span>`
}

html+=`
<div class="quest ${q.done?"complete":""}">
${q.t}
${timer}
<br>
<button onclick="startQuest(${i})" ${q.started||q.done?"disabled":""}>START</button>
<button onclick="completeQuest(${i})" ${!q.started||remain>0||q.done?"disabled":""}>DONE</button>
</div>`
})

document.getElementById("quests").innerHTML=html
}

/* ---------- MAIN RENDER ---------- */

function render(){

document.getElementById("level").textContent=data.level
document.getElementById("xp").textContent=data.xp
document.getElementById("rank").textContent=rank(data.level)
document.getElementById("str").textContent=data.str
document.getElementById("int").textContent=data.int
document.getElementById("foc").textContent=data.foc
document.getElementById("streak").textContent=data.streak
document.getElementById("event").textContent=data.event||"None"

renderQuests()
}

/* refresh timers every second */
setInterval(render,1000)

render()

</script>
</body>
</html>
