<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ARISE SYSTEM</title>

<style>
body{
background:#000;
color:#00ffe1;
font-family:monospace;
text-align:center;
padding:15px;
}

.card{
border:1px solid #00ffe1;
border-radius:10px;
padding:15px;
margin:12px 0;
box-shadow:0 0 10px #00ffe1;
}

button{
margin:3px;
padding:6px 12px;
border:none;
border-radius:6px;
background:#00ffe1;
font-weight:bold;
}

.quest{
border:1px solid #00ffe1;
margin:10px;
padding:10px;
border-radius:8px;
}

.timer{
color:#00ff88;
font-size:14px;
}
</style>
</head>
<body>

<h1>ARISE SYSTEM</h1>

<div class="card">
<div id="stats"></div>
</div>

<div class="card">
<h2>Daily Quests</h2>
<div id="daily"></div>
</div>

<div class="card">
<h2>Penalty Quests</h2>
<div id="penalty"></div>
</div>

<div class="card">
<h2>Surprise Quests</h2>
<div id="surprise"></div>
</div>

<audio id="beep" src="beep.mp3"></audio>

<script>
/* ========= SAFE SAVE SYSTEM ========= */
const SAVE_KEY="ariseSave";

function load(){
return JSON.parse(
localStorage.getItem("ariseSave")
|| localStorage.getItem("ariseData")
|| localStorage.getItem("playerData")
|| null
) || {
level:1,xp:0,streak:0,str:1,int:1,foc:1,quests:{}
}
}

function save(){
localStorage.setItem(SAVE_KEY,JSON.stringify(data));
}

let data=load();

/* ========= QUEST DATA ========= */
const dailyQuests=[
{id:"run",name:"Exercise",time:60,xp:20},
{id:"mind",name:"Mind Training",time:45,xp:15},
{id:"skill",name:"Learn Skill",time:90,xp:30}
];

const penaltyQuests=[
{id:"push",name:"50 Pushups",time:15,xp:10},
{id:"clean",name:"Clean Room",time:20,xp:12}
];

const surpriseQuests=[
{level:3,name:"Cold Shower",time:5,xp:20},
{level:5,name:"No Phone 2h",time:120,xp:40},
{level:7,name:"Wake at 5AM",time:1,xp:60}
];

/* ========= RENDER ========= */
function renderStats(){
stats.innerHTML=
`LEVEL ${data.level}<br>
XP ${data.xp}/100<br>
STR ${data.str} | INT ${data.int} | FOC ${data.foc}`
}

function createQuest(q,type){
let state=data.quests[q.id]||{running:false,time:q.time*60};

let div=document.createElement("div");
div.className="quest";

div.innerHTML=`
<b>${q.name}</b><br>
<span class="timer" id="t-${q.id}">${format(state.time)}</span><br>
<button onclick="start('${q.id}',${q.time})">Start</button>
<button onclick="pause('${q.id}')">Pause</button>
<button onclick="resume('${q.id}')">Resume</button>
<button onclick="done('${q.id}',${q.xp})">Done</button>
`;

return div;
}

function render(){
daily.innerHTML="";
penalty.innerHTML="";
surprise.innerHTML="";

dailyQuests.forEach(q=>daily.appendChild(createQuest(q,"daily")));
penaltyQuests.forEach(q=>penalty.appendChild(createQuest(q,"pen")));

surpriseQuests.forEach(q=>{
if(data.level>=q.level){
surprise.appendChild(createQuest(q,"sur"))
}
})

renderStats();
}

/* ========= TIMER SYSTEM ========= */
function format(s){
let m=Math.floor(s/60);
let sec=s%60;
return m+":"+(sec<10?"0"+sec:sec);
}

function tick(){
for(let id in data.quests){
let q=data.quests[id];
if(q.running && q.time>0){
q.time--;
document.getElementById("t-"+id).innerText=format(q.time);
}
}
save();
}
setInterval(tick,1000);

/* ========= CONTROLS ========= */
function start(id,time){
data.quests[id]={running:true,time:time*60};
save();
render();
}

function pause(id){
if(data.quests[id]) data.quests[id].running=false;
save();
}

function resume(id){
if(data.quests[id]) data.quests[id].running=true;
save();
}

function done(id,xp){
document.getElementById("beep").play();

data.xp+=xp;
data.quests[id]={running:false,time:0};

if(data.xp>=100){
data.xp-=100;
data.level++;
data.str++;
data.int++;
data.foc++;
alert("LEVEL UP");
}

save();
render();
}

/* ========= AUTO SAVE BACKUP ========= */
setInterval(()=>{
localStorage.setItem("ariseBackup",JSON.stringify(data))
},5000);

/* ========= INIT ========= */
render();
</script>

</body>
</html>
