<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ARISE SYSTEM</title>

<style>
body{
background:black;
color:#00ffe1;
font-family:Segoe UI;
text-align:center;
padding:10px;
}

.card{
border:2px solid #00ffe1;
box-shadow:0 0 15px #00ffe1;
border-radius:20px;
padding:15px;
margin:15px auto;
width:90%;
max-width:500px;
}

button{
background:#00ffe1;
border:none;
padding:8px 15px;
margin:5px;
border-radius:10px;
font-weight:bold;
}

.quest{
border:1px solid #00ffe1;
margin:10px;
padding:10px;
border-radius:15px;
box-shadow:0 0 10px #00ffe1 inset;
}

.levelup{
animation:flash 1s infinite alternate;
}

@keyframes flash{
from{box-shadow:0 0 10px #00ffe1;}
to{box-shadow:0 0 30px #00ffe1;}
}
</style>
</head>

<body>

<h1>ARISE SYSTEM</h1>

<div class="card" id="playerBox">
<div id="level"></div>
<div id="stats"></div>
</div>

<button onclick="enableNotifications()">Enable Reminders</button>

<div class="card">
<h2>Daily Quests</h2>
<div id="quests"></div>
</div>

<audio id="beep" src="beep.mp3"></audio>

<script>
/* =========================
SAVE DATA
========================= */
let data = JSON.parse(localStorage.getItem("arise"));

if(!data){
data={
level:1,
xp:0,
rank:"E",
streak:1,
stats:{str:0,int:0,foc:0},
quests:{},
lastDate:null,
penalty:false
};
}

/* =========================
QUEST LIST
========================= */
const QUESTS={
"Exercise":{time:1200,stat:"str"},
"Deep Thinking":{time:1800,stat:"foc"},
"Learn Skill":{time:3600,stat:"int"},
"Strategy Thinking":{time:2400,stat:"int"},
"Problem Solving":{time:1800,stat:"foc"}
};

const PENALTY={
"Penalty Run":{time:900,stat:"str"},
"Cold Shower Discipline":{time:300,stat:"foc"},
"Extra Study":{time:1200,stat:"int"}
};

/* =========================
DATE RESET CHECK
========================= */
let today=new Date().toDateString();

if(data.lastDate!==today){

if(data.lastDate!==null){
for(let q in QUESTS){
if(!data.quests[q] || !data.quests[q].done){
data.penalty=true;
}
}
}

data.quests={};
data.lastDate=today;
save();
}

/* =========================
SAVE FUNCTION
========================= */
function save(){
localStorage.setItem("arise",JSON.stringify(data));
}

/* =========================
RANK SYSTEM
========================= */
function rankCheck(){
if(data.level>=50)data.rank="S";
else if(data.level>=40)data.rank="A";
else if(data.level>=30)data.rank="B";
else if(data.level>=20)data.rank="C";
else if(data.level>=10)data.rank="D";
else data.rank="E";
}

/* =========================
LEVEL UP
========================= */
function gainXP(x){
data.xp+=x;

if(data.xp>=100){
data.xp=0;
data.level++;
document.getElementById("playerBox").classList.add("levelup");
setTimeout(()=>document.getElementById("playerBox").classList.remove("levelup"),1500);
}

rankCheck();
save();
renderPlayer();
}

/* =========================
PLAYER UI
========================= */
function renderPlayer(){
level.innerHTML=`LEVEL ${data.level}<br>XP ${data.xp}/100<br>Rank ${data.rank}<br>Streak ${data.streak}`;
stats.innerHTML=`STR ${data.stats.str} | INT ${data.stats.int} | FOC ${data.stats.foc}`;
}

/* =========================
TIMER FORMAT
========================= */
function fmt(s){
let m=Math.floor(s/60);
let sec=s%60;
return m+":"+(sec<10?"0":"")+sec;
}

/* =========================
QUEST RENDER
========================= */
function renderQuests(){

let box=document.getElementById("quests");
box.innerHTML="";

let list=data.penalty?PENALTY:QUESTS;

for(let name in list){

if(!data.quests[name]){
data.quests[name]={
time:list[name].time,
remain:list[name].time,
running:false,
done:false
};
}

let q=data.quests[name];

let div=document.createElement("div");
div.className="quest";

div.innerHTML=`
<b>${name}</b><br>
Time: <span id="t${name}">${fmt(q.remain)}</span><br>
<button onclick="startQuest('${name}')">Start</button>
<button onclick="pauseQuest('${name}')">Pause</button>
<button onclick="doneQuest('${name}')">Done</button>
`;

box.appendChild(div);

if(q.running){
startTimer(name);
}
}
}

/* =========================
TIMER ENGINE
========================= */
function startQuest(name){
let q=data.quests[name];
if(q.running || q.done)return;
q.running=true;
startTimer(name);
save();
}

function startTimer(name){
let q=data.quests[name];

q.interval=setInterval(()=>{
if(!q.running)return;

q.remain--;
document.getElementById("t"+name).textContent=fmt(q.remain);

if(q.remain===10){
beep.play();
notify(name+" ending soon!");
}

if(q.remain<=0){
clearInterval(q.interval);
doneQuest(name);
}
save();
},1000);
}

function pauseQuest(name){
let q=data.quests[name];
q.running=false;
clearInterval(q.interval);
save();
}

function doneQuest(name){
let q=data.quests[name];
if(q.done)return;

q.done=true;
q.running=false;
clearInterval(q.interval);

let stat=(data.penalty?PENALTY:QUESTS)[name].stat;
data.stats[stat]+=2;

gainXP(20);

beep.play();
notify(name+" completed!");

checkAllDone();
save();
renderPlayer();
}

/* =========================
CHECK ALL COMPLETE
========================= */
function checkAllDone(){
let list=data.penalty?PENALTY:QUESTS;

for(let q in list){
if(!data.quests[q].done)return;
}

data.penalty=false;
data.streak++;
data.quests={};
save();
setTimeout(renderQuests,500);
}

/* =========================
NOTIFICATIONS
========================= */
function enableNotifications(){
Notification.requestPermission();
}

function notify(text){
if(Notification.permission==="granted"){
new Notification(text);
}
}

/* =========================
INIT
========================= */
renderPlayer();
renderQuests();
</script>

</body>
</html>
