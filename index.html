<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ARISE SYSTEM</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<style>
body{
margin:0;
background:#000;
color:#00ffe7;
font-family:serif;
text-align:center;
}

h1{
margin-top:15px;
text-shadow:0 0 15px cyan;
}

.panel{
margin:15px;
padding:15px;
border-radius:16px;
border:1px solid cyan;
box-shadow:0 0 15px cyan inset,0 0 15px cyan;
}

.quest{
margin:12px;
padding:14px;
border-radius:14px;
border:1px solid lime;
box-shadow:0 0 10px lime;
}

.done{
background:#002b26;
border-color:#00ffb7;
}

button{
margin:6px;
padding:8px 18px;
border:none;
border-radius:10px;
background:cyan;
font-weight:bold;
cursor:pointer;
}

.timer{
color:#fff;
font-size:13px;
}

.rank{
font-size:18px;
color:gold;
}

</style>
</head>
<body>

<h1>ARISE SYSTEM</h1>

<div class="panel">
LEVEL <span id="level">1</span><br>
XP <span id="xp">0</span>/100<br>
Rank <span class="rank" id="rank">E</span><br><br>
STR <span id="str">1</span> |
INT <span id="int">1</span> |
FOC <span id="foc">1</span>
</div>

<div class="panel">
<h2>Daily Quests</h2>
<div id="quests"></div>
</div>

<div class="panel" id="penaltyBox" style="display:none">
<h2>PUNISHMENT QUEST</h2>
<div id="penalty"></div>
</div>

<script>
/* ---------- RANK SYSTEM ---------- */

function getRank(l){
if(l<5)return "E";
if(l<10)return "D";
if(l<20)return "C";
if(l<30)return "B";
if(l<50)return "A";
if(l<70)return "S";
if(l<100)return "SS";
return "SSS";
}

/* ---------- STORAGE ---------- */

const today=new Date().toDateString();

let data=JSON.parse(localStorage.getItem("arise"))||{
date:today,
xp:0,
level:1,
str:1,
int:1,
foc:1,
quests:[],
penalty:null
};

function save(){
localStorage.setItem("arise",JSON.stringify(data));
}

/* ---------- QUEST GENERATOR ---------- */

function newQuests(){
return[
{name:"Strength Training",stat:"str",time:15,start:0,done:false},
{name:"Logic / Puzzle",stat:"int",time:20,start:0,done:false},
{name:"Deep Focus Study",stat:"foc",time:25,start:0,done:false},
{name:"Skill Building",stat:"int",time:30,start:0,done:false},
{name:"Strategy Thinking",stat:"foc",time:20,start:0,done:false}
];
}

/* ---------- PENALTY ---------- */

function createPenalty(){
const list=[
"100 Pushups",
"Cold Shower Discipline",
"1 Hour Deep Study",
"Run 2km",
"30min Meditation"
];
return{
name:list[Math.floor(Math.random()*list.length)],
done:false
};
}

/* ---------- DAILY RESET ---------- */

if(data.date!==today){

let missed=data.quests.some(q=>!q.done);

data.date=today;
data.quests=newQuests();

if(missed)
data.penalty=createPenalty();
else
data.penalty=null;

save();
}

/* ---------- QUEST ACTIONS ---------- */

window.startQ=i=>{
data.quests[i].start=Date.now();
save();
render();
};

window.doneQ=i=>{
let q=data.quests[i];

if(Date.now()-q.start < q.time*60000){
alert("Timer not finished");
return;
}

q.done=true;
data.xp+=20;
data[q.stat]+=1;

if(data.xp>=100){
data.xp=0;
data.level++;
alert("LEVEL UP");
}

save();
render();
};

/* ---------- PENALTY ACTION ---------- */

window.finishPenalty=()=>{
data.penalty.done=true;
data.penalty=null;
save();
render();
};

/* ---------- RENDER ---------- */

function render(){

level.textContent=data.level;
xp.textContent=data.xp;
rank.textContent=getRank(data.level);

str.textContent=data.str;
int.textContent=data.int;
foc.textContent=data.foc;

/* quests */

let html="";

data.quests.forEach((q,i)=>{

let remain="";

if(q.start && !q.done){
let r=q.time*60000-(Date.now()-q.start);
if(r<0)r=0;
let m=Math.floor(r/60000);
let s=Math.floor((r%60000)/1000);
remain=`<div class="timer">${m}:${s.toString().padStart(2,"0")} left</div>`;
}

html+=`
<div class="quest ${q.done?"done":""}">
${q.name}
${remain}
<br>
<button onclick="startQ(${i})">Start</button>
<button onclick="doneQ(${i})">Done</button>
</div>
`;
});

quests.innerHTML=html;

/* penalty */

if(data.penalty){
penaltyBox.style.display="block";
penalty.innerHTML=`
<div class="quest">
${data.penalty.name}<br>
<button onclick="finishPenalty()">Complete Punishment</button>
</div>`;
}else{
penaltyBox.style.display="none";
}
}

/* ---------- TIMER LOOP ---------- */

setInterval(render,1000);

render();
</script>

</body>
</html>
