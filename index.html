<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Arise System</title>

<style>
body{
background:#000;
color:#00fff7;
font-family:cursive;
text-align:center;
}

.box{
border:2px solid #00fff7;
border-radius:20px;
padding:20px;
margin:20px;
box-shadow:0 0 20px #00fff7;
}

button{
padding:10px 15px;
margin:5px;
border:none;
border-radius:10px;
background:#00fff7;
color:#000;
font-weight:bold;
}

#levelUp{
position:fixed;
top:40%;
left:50%;
transform:translate(-50%,-50%) scale(0);
font-size:40px;
color:gold;
transition:.4s;
pointer-events:none;
}

</style>
</head>
<body>

<h1>ARISE SYSTEM</h1>

<h2 id="rank"></h2>
<h3>Level <span id="level">1</span> | XP <span id="xp">0</span></h3>

<button id="notifyBtn">Enable Notifications</button>

<div class="box">
<h2>Daily Quests</h2>
<div id="quests"></div>
</div>

<div class="box">
<h2>Special Quests</h2>
<div id="special"></div>
</div>

<div class="box">
<h2>Penalties</h2>
<div id="penalties"></div>
</div>

<div id="levelUp">LEVEL UP!</div>

<script>

// ================= DATA =================

const dailyQuests={
"Exercise":{time:120,xp:20},
"Deep Thinking":{time:180,xp:30},
"Learn Skill":{time:300,xp:50}
};

const specialQuests={
"Meditate 10min":{time:600,xp:100,unlock:2},
"Cold Shower":{time:60,xp:80,unlock:3},
"Read 20 pages":{time:900,xp:120,unlock:4}
};

const ranks=[
"Novice",
"Hunter",
"Elite",
"Shadow",
"Monarch"
];

// ================= SAVE =================

let level=Number(localStorage.level)||1;
let xp=Number(localStorage.xp)||0;
let missed=Number(localStorage.missed)||0;

// ================= UI UPDATE =================

function updateUI(){
document.getElementById("level").innerText=level;
document.getElementById("xp").innerText=xp;
document.getElementById("rank").innerText=ranks[Math.min(level-1,ranks.length-1)];
localStorage.level=level;
localStorage.xp=xp;
}

// ================= XP SYSTEM =================

function gainXP(amount){
xp+=amount;

let need=level*100;

if(xp>=need){
xp-=need;
level++;
showLevelUp();
notify("Level Up!");
}

updateUI();
}

function showLevelUp(){
let el=document.getElementById("levelUp");
el.style.transform="translate(-50%,-50%) scale(1.5)";
setTimeout(()=>el.style.transform="translate(-50%,-50%) scale(0)",900);
}

// ================= QUEST ENGINE =================

function createQuest(name,data,parent){

const div=document.createElement("div");

const title=document.createElement("h3");
title.innerText=name+" (+"+data.xp+"xp)";

const timer=document.createElement("p");
timer.innerText=format(data.time);

let remaining=data.time;
let interval=null;

const start=document.createElement("button");
start.innerText="Start";

const pause=document.createElement("button");
pause.innerText="Pause";

const done=document.createElement("button");
done.innerText="Done";

start.onclick=()=>{
if(interval)return;

interval=setInterval(()=>{
remaining--;
timer.innerText=format(remaining);

if(remaining<=0){
clearInterval(interval);
interval=null;
gainXP(data.xp);
notify(name+" completed");
div.remove();
}
},1000);
};

pause.onclick=()=>{
clearInterval(interval);
interval=null;
};

done.onclick=()=>{
clearInterval(interval);
gainXP(data.xp);
div.remove();
};

div.append(title,timer,start,pause,done);
parent.appendChild(div);
}

// ================= LOAD QUESTS =================

function loadDaily(){
let box=document.getElementById("quests");
box.innerHTML="";
for(let q in dailyQuests){
createQuest(q,dailyQuests[q],box);
}
}

function loadSpecial(){
let box=document.getElementById("special");
box.innerHTML="";
for(let q in specialQuests){
if(level>=specialQuests[q].unlock)
createQuest(q,specialQuests[q],box);
}
}

loadDaily();
loadSpecial();
updateUI();

// ================= PENALTY SYSTEM =================

function checkMiss(){
let today=new Date().toDateString();

if(localStorage.lastDay!==today){
missed++;
localStorage.missed=missed;
localStorage.lastDay=today;
}

let p=document.getElementById("penalties");
p.innerHTML="Missed Days: "+missed;
}

checkMiss();

// ================= NOTIFICATION =================

document.getElementById("notifyBtn").onclick=async()=>{
if(Notification.permission!=="granted")
await Notification.requestPermission();
alert("Notifications Enabled");
};

function notify(msg){
if(Notification.permission==="granted"){
new Notification("Arise System",{body:msg});
}
}

function format(s){
let m=Math.floor(s/60);
let sec=s%60;
return m+":"+String(sec).padStart(2,"0");
}

</script>

</body>
</html>
